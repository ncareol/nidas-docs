<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nidas: nidas/apps/data_influxdb.cc File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nidas
   &#160;<span id="projectnumber">v1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_63299fbf0c9c17e6aecce65eb5f7e6e7.html">nidas</a></li><li class="navelem"><a class="el" href="../../dir_9e88f9a8f4cc98bb9167bdd0000e3f30.html">apps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">data_influxdb.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;ctime&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/d10/core_2FileSet_8h_source.html">nidas/core/FileSet.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/d03/core_2Socket_8h_source.html">nidas/core/Socket.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d4/d86/RawSampleInputStream_8h_source.html">nidas/dynld/RawSampleInputStream.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/dff/Project_8h_source.html">nidas/core/Project.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/d95/XMLParser_8h_source.html">nidas/core/XMLParser.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d7/dac/SamplePipeline_8h_source.html">nidas/core/SamplePipeline.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/d68/DSMConfig_8h_source.html">nidas/core/DSMConfig.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../de/dc4/DSMSensor_8h_source.html">nidas/core/DSMSensor.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d7/d90/Variable_8h_source.html">nidas/core/Variable.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d0/d02/NidasApp_8h_source.html">nidas/core/NidasApp.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d1/d37/EOFException_8h_source.html">nidas/util/EOFException.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/d97/Process_8h_source.html">nidas/util/Process.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dd/da4/Logger_8h_source.html">nidas/util/Logger.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/d7f/auto__ptr_8h_source.html">nidas/util/auto_ptr.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../da/d9f/util_2util_8h_source.html">nidas/util/util.h</a>&gt;</code><br />
<code>#include &lt;set&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdexcept&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;curl/curl.h&gt;</code><br />
<code>#include &lt;curl/easy.h&gt;</code><br />
<code>#include &lt;future&gt;</code><br />
<code>#include &lt;mutex&gt;</code><br />
<code>#include &lt;json/json.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d84/classCharBuffer.html">CharBuffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple char buffer class to provide memory into which C strings can be written.  <a href="../../dc/d84/classCharBuffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db4/classInfluxDB.html">InfluxDB</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Methods and memory for creating an Influx database, accumulating measurements, and posting them to the database.  <a href="../../d5/db4/classInfluxDB.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d09/classSampleToDatabase.html">SampleToDatabase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dc9/classSampleDispatcher.html">SampleDispatcher</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4c/classDataInfluxdb.html">DataInfluxdb</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db1/classAutoProject.html">AutoProject</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a219229c0abe5a8f76f17f09e2aa04dcf"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3d/data__influxdb_8cc.html#a219229c0abe5a8f76f17f09e2aa04dcf">string_to_lower</a> (const std::string &amp;upper)</td></tr>
<tr class="separator:a219229c0abe5a8f76f17f09e2aa04dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55811c0c44f89c69ca90f5d12d720210"><td class="memItemLeft" align="right" valign="top">CURLcode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3d/data__influxdb_8cc.html#a55811c0c44f89c69ca90f5d12d720210">dataToInfluxDB</a> (CURL *curl, const std::string &amp;url, <a class="el" href="../../dc/d84/classCharBuffer.html">CharBuffer</a> *data, unsigned int nmeasurements)</td></tr>
<tr class="memdesc:a55811c0c44f89c69ca90f5d12d720210"><td class="mdescLeft">&#160;</td><td class="mdescRight">Post the given data buffer to the database, then clear it.  <a href="../../dc/d3d/data__influxdb_8cc.html#a55811c0c44f89c69ca90f5d12d720210">More...</a><br /></td></tr>
<tr class="separator:a55811c0c44f89c69ca90f5d12d720210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0453f3c8a6df9686ef5e68f5af57079"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3d/data__influxdb_8cc.html#ad0453f3c8a6df9686ef5e68f5af57079">writeInfluxResult</a> (void *<a class="el" href="../../d6/db2/loop_8c.html#a8163a75dd5224dc77430d8af36bd7592">buffer</a>, size_t size, size_t nmemb, void *userp)</td></tr>
<tr class="separator:ad0453f3c8a6df9686ef5e68f5af57079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac723322c01b932726f49bcd5c3b85dc1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3d/data__influxdb_8cc.html#ac723322c01b932726f49bcd5c3b85dc1">backslash</a> (std::string &amp;tagvalue)</td></tr>
<tr class="memdesc:ac723322c01b932726f49bcd5c3b85dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape comma, space, and equal characters in the given string with backslash, to conform to influxdb line protocol for tag values.  <a href="../../dc/d3d/data__influxdb_8cc.html#ac723322c01b932726f49bcd5c3b85dc1">More...</a><br /></td></tr>
<tr class="separator:ac723322c01b932726f49bcd5c3b85dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ab4ec40d4174bbcb49f0df0a9ecca4"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3d/data__influxdb_8cc.html#a32ab4ec40d4174bbcb49f0df0a9ecca4">id_to_string</a> (unsigned int id)</td></tr>
<tr class="separator:a32ab4ec40d4174bbcb49f0df0a9ecca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3d/data__influxdb_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac723322c01b932726f49bcd5c3b85dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac723322c01b932726f49bcd5c3b85dc1">&#9670;&nbsp;</a></span>backslash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void backslash </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>tagvalue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape comma, space, and equal characters in the given string with backslash, to conform to influxdb line protocol for tag values. </p>

<p class="reference">Referenced by <a class="el" href="../../db/d09/classSampleToDatabase.html#aa3fcd2a05dee5eaf5f9fa204a4da844f">SampleToDatabase::SampleToDatabase()</a>.</p>

</div>
</div>
<a id="a55811c0c44f89c69ca90f5d12d720210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55811c0c44f89c69ca90f5d12d720210">&#9670;&nbsp;</a></span>dataToInfluxDB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CURLcode dataToInfluxDB </td>
          <td>(</td>
          <td class="paramtype">CURL *&#160;</td>
          <td class="paramname"><em>curl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d84/classCharBuffer.html">CharBuffer</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nmeasurements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Post the given data buffer to the database, then clear it. </p>
<p>This is a function and not a method of <a class="el" href="../../d5/db4/classInfluxDB.html" title="Methods and memory for creating an Influx database, accumulating measurements, and posting them to th...">InfluxDB</a>, so that it only uses the variables passed into it and no locking is needed to ensure exclusive access to the object. The CURL pointer is only ever used here, so as long as only double-buffering is used, only one thread should ever call into the curl library at a time. </p>

<p class="reference">References <a class="el" href="../../dc/d84/classCharBuffer.html#a356d40e0af02b0f4d3b098c7775d3bcc">CharBuffer::clear()</a>, <a class="el" href="../../d4/dda/group__LoggerMacros.html#ga8580ef8434c78e3a864d50f63222ba6a">DLOG</a>, <a class="el" href="../../d4/dda/group__LoggerMacros.html#ga16497da0bcd201af9ba917474662ad88">ELOG</a>, and <a class="el" href="../../dc/d84/classCharBuffer.html#a65bc266858b8654cbe62e3f57b4395af">CharBuffer::get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/db4/classInfluxDB.html#a119c83924f2527765bb4ace24e01f8da">InfluxDB::sendData()</a>.</p>

</div>
</div>
<a id="a32ab4ec40d4174bbcb49f0df0a9ecca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ab4ec40d4174bbcb49f0df0a9ecca4">&#9670;&nbsp;</a></span>id_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string id_to_string </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../df/d6b/classSampleCounter.html#a3ac46dcee6da9bfaf5c74fc0d5de4087">SampleCounter::generateStreamId()</a>, and <a class="el" href="../../db/d09/classSampleToDatabase.html#aa3fcd2a05dee5eaf5f9fa204a4da844f">SampleToDatabase::SampleToDatabase()</a>.</p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a219229c0abe5a8f76f17f09e2aa04dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a219229c0abe5a8f76f17f09e2aa04dcf">&#9670;&nbsp;</a></span>string_to_lower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string string_to_lower </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>upper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../db/d09/classSampleToDatabase.html#ad62ba38835520642aaed80f877453314">SampleToDatabase::defaultMeasurementName()</a>.</p>

</div>
</div>
<a id="ad0453f3c8a6df9686ef5e68f5af57079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0453f3c8a6df9686ef5e68f5af57079">&#9670;&nbsp;</a></span>writeInfluxResult()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t writeInfluxResult </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmemb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="../../d6/db2/loop_8c.html#a8163a75dd5224dc77430d8af36bd7592">buffer</a>, and <a class="el" href="../../dc/d84/classCharBuffer.html#a79760e007965ee4a4c61e969e6dd7b48">CharBuffer::getSpace()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/db4/classInfluxDB.html#aa27dcaf9f77d2e77a9f379f338e379be">InfluxDB::open()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
