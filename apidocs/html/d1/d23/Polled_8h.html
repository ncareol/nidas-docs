<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nidas: nidas/core/Polled.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nidas
   &#160;<span id="projectnumber">v1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_63299fbf0c9c17e6aecce65eb5f7e6e7.html">nidas</a></li><li class="navelem"><a class="el" href="../../dir_c5278764d8062397cd42dabb267c041d.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Polled.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/poll.h&gt;</code><br />
<code>#include &lt;sys/epoll.h&gt;</code><br />
</div>
<p><a href="../../d1/d23/Polled_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7b/classnidas_1_1core_1_1Polled.html">nidas::core::Polled</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface for objects with a file descriptor, providing a virtual method to be called when system calls such as select, poll, or epoll indicate an event is pending on the file descriptor.  <a href="../../db/d7b/classnidas_1_1core_1_1Polled.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d7/d2e/namespacenidas"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d2e/namespacenidas.html">nidas</a></td></tr>
<tr class="memdesc:d7/d2e/namespacenidas"><td class="mdescLeft">&#160;</td><td class="mdescRight">Root namespace for the NCAR In-Situ Data Acquisition Software. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d5/d09/namespacenidas_1_1core"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d09/namespacenidas_1_1core.html">nidas::core</a></td></tr>
<tr class="memdesc:d5/d09/namespacenidas_1_1core"><td class="mdescLeft">&#160;</td><td class="mdescRight">The essential core classes of nidas. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab5949f5aed6c9daf735576cef314c5e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#ab5949f5aed6c9daf735576cef314c5e5">POLL_EPOLL_ET</a>&#160;&#160;&#160;0       /* epoll edge-triggered */</td></tr>
<tr class="memdesc:ab5949f5aed6c9daf735576cef314c5e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumeration of file descriptor polling methods supported by SensorHander.  <a href="../../d1/d23/Polled_8h.html#ab5949f5aed6c9daf735576cef314c5e5">More...</a><br /></td></tr>
<tr class="separator:ab5949f5aed6c9daf735576cef314c5e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab072ebeb12a7717509a0fc57c42f2e6e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#ab072ebeb12a7717509a0fc57c42f2e6e">POLL_EPOLL_LT</a>&#160;&#160;&#160;1       /* epoll level-triggered */</td></tr>
<tr class="separator:ab072ebeb12a7717509a0fc57c42f2e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030d1ca9a54b2374ca589567a82e373e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#a030d1ca9a54b2374ca589567a82e373e">POLL_PSELECT</a>&#160;&#160;&#160;2       /* pselect */</td></tr>
<tr class="separator:a030d1ca9a54b2374ca589567a82e373e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2cf805d3b02ba7afa0b3af2b86c19b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#ab2cf805d3b02ba7afa0b3af2b86c19b0">POLL_POLL</a>&#160;&#160;&#160;3       /* poll/ppoll */</td></tr>
<tr class="separator:ab2cf805d3b02ba7afa0b3af2b86c19b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d041cf6a388250db7729d10a52ac8ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#a9d041cf6a388250db7729d10a52ac8ef">POLLING_METHOD</a>&#160;&#160;&#160;<a class="el" href="../../d1/d23/Polled_8h.html#ab072ebeb12a7717509a0fc57c42f2e6e">POLL_EPOLL_LT</a></td></tr>
<tr class="memdesc:a9d041cf6a388250db7729d10a52ac8ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select a POLLING_METHOD.  <a href="../../d1/d23/Polled_8h.html#a9d041cf6a388250db7729d10a52ac8ef">More...</a><br /></td></tr>
<tr class="separator:a9d041cf6a388250db7729d10a52ac8ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3181d4b112b3bf09efc8db655ec79164"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#a3181d4b112b3bf09efc8db655ec79164">N_POLLIN</a>&#160;&#160;&#160;POLLIN</td></tr>
<tr class="memdesc:a3181d4b112b3bf09efc8db655ec79164"><td class="mdescLeft">&#160;</td><td class="mdescRight">epoll.h defines EPOLLIN, EPOLLERR, EPOLLHUP, EPOLLRDHUP poll.h defines POLLIN, POLLERR, POLLHUP, POLLRDHUP.  <a href="../../d1/d23/Polled_8h.html#a3181d4b112b3bf09efc8db655ec79164">More...</a><br /></td></tr>
<tr class="separator:a3181d4b112b3bf09efc8db655ec79164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a473efe38b3b75c28e043ccb5c27f04bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#a473efe38b3b75c28e043ccb5c27f04bd">N_POLLERR</a>&#160;&#160;&#160;POLLERR</td></tr>
<tr class="separator:a473efe38b3b75c28e043ccb5c27f04bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de939fb0a2d25398b1f8db478bd7df2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#a4de939fb0a2d25398b1f8db478bd7df2">N_POLLHUP</a>&#160;&#160;&#160;POLLHUP</td></tr>
<tr class="separator:a4de939fb0a2d25398b1f8db478bd7df2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd28b0f4426d10b1d0da6a3b0f904fa3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d23/Polled_8h.html#abd28b0f4426d10b1d0da6a3b0f904fa3">N_POLLRDHUP</a>&#160;&#160;&#160;POLLHUP</td></tr>
<tr class="separator:abd28b0f4426d10b1d0da6a3b0f904fa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a473efe38b3b75c28e043ccb5c27f04bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a473efe38b3b75c28e043ccb5c27f04bd">&#9670;&nbsp;</a></span>N_POLLERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_POLLERR&#160;&#160;&#160;POLLERR</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4de939fb0a2d25398b1f8db478bd7df2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4de939fb0a2d25398b1f8db478bd7df2">&#9670;&nbsp;</a></span>N_POLLHUP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_POLLHUP&#160;&#160;&#160;POLLHUP</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3181d4b112b3bf09efc8db655ec79164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3181d4b112b3bf09efc8db655ec79164">&#9670;&nbsp;</a></span>N_POLLIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_POLLIN&#160;&#160;&#160;POLLIN</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>epoll.h defines EPOLLIN, EPOLLERR, EPOLLHUP, EPOLLRDHUP poll.h defines POLLIN, POLLERR, POLLHUP, POLLRDHUP. </p>
<p>As of glibc 2.12 and 2.16 they have equal values.</p>
<p>Define local macros N_POLLIN, N_POLLERR, N_POLLHUP, N_POLLRDHUP from the poll.h values, so that code compiles with which ever system header file is used. </p>

</div>
</div>
<a id="abd28b0f4426d10b1d0da6a3b0f904fa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd28b0f4426d10b1d0da6a3b0f904fa3">&#9670;&nbsp;</a></span>N_POLLRDHUP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_POLLRDHUP&#160;&#160;&#160;POLLHUP</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab5949f5aed6c9daf735576cef314c5e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5949f5aed6c9daf735576cef314c5e5">&#9670;&nbsp;</a></span>POLL_EPOLL_ET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POLL_EPOLL_ET&#160;&#160;&#160;0       /* epoll edge-triggered */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumeration of file descriptor polling methods supported by SensorHander. </p>

</div>
</div>
<a id="ab072ebeb12a7717509a0fc57c42f2e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab072ebeb12a7717509a0fc57c42f2e6e">&#9670;&nbsp;</a></span>POLL_EPOLL_LT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POLL_EPOLL_LT&#160;&#160;&#160;1       /* epoll level-triggered */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab2cf805d3b02ba7afa0b3af2b86c19b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2cf805d3b02ba7afa0b3af2b86c19b0">&#9670;&nbsp;</a></span>POLL_POLL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POLL_POLL&#160;&#160;&#160;3       /* poll/ppoll */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a030d1ca9a54b2374ca589567a82e373e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a030d1ca9a54b2374ca589567a82e373e">&#9670;&nbsp;</a></span>POLL_PSELECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POLL_PSELECT&#160;&#160;&#160;2       /* pselect */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9d041cf6a388250db7729d10a52ac8ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d041cf6a388250db7729d10a52ac8ef">&#9670;&nbsp;</a></span>POLLING_METHOD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POLLING_METHOD&#160;&#160;&#160;<a class="el" href="../../d1/d23/Polled_8h.html#ab072ebeb12a7717509a0fc57c42f2e6e">POLL_EPOLL_LT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select a POLLING_METHOD. </p>
<p>Also see discussion in SensorHandler.</p>
<p>The EPOLL methods are the most efficient, since the OS can cache the file descriptors of interest. They are not passed on each poll. The system is only notified when they change.</p>
<p>POLL_EPOLL_ET (edge-triggered) may also be a bit more efficient than POLL_EPOLL_LT (level-triggered), but there is one circumstance where it doesn't work in NIDAS.</p>
<p>Edge-triggering will only return a EPOLLIN event on a transition from no-data-available to data-available, so on an EPOLLIN, one must read all data available from a descriptor, using non-blocking IO, in order for an EPOLLIN event to occur again.</p>
<p>Read methods in NIDAS return a length of 0 on EAGAIN/EWOULDBLOCK, rather than an exception. So when using edge-triggering, one must do non-blocking reads on a descriptor until a return of 0. However with UDP sockets, incoming packets can have an actual length of 0 (we saw this on a NovAtel GPS), and so a read return of zero doesn't necesarily indicate there is no data left to read. Due to this bug, on receipt of a zero-length UDP packet using edge-triggering, NIDAS will cease to get EPOLLIN events on that socket.</p>
<p>Fixing this would require changing NIDAS reads to return an exception, or perhaps -1, on EAGAIN/EWOULDBLOCK. The possible gains of edge-triggering do not seem to be worth it, so we'll use level-triggering. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
